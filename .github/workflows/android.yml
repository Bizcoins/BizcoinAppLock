name: Android CI

# 1. Define when this workflow runs
on:
  push:
    branches: [ master ]
  pull_request:
    branches: [ master ]

# 2. Define the jobs
jobs:
  build:
    # Use an Ubuntu runner (virtual machine)
    runs-on: ubuntu-latest

    steps:
    # Step 1: Check out the code
    - name: Checkout repository
      uses: actions/checkout@v4

    # Step 2: Set up Java Development Kit (JDK)
    - name: Set up JDK 17
      uses: actions/setup-java@v4
      with:
        java-version: '17'
        distribution: 'temurin'

    # Step 3: Grant execute permission to gradlew
    - name: Grant execute permission for gradlew
      run: chmod +x gradlew

    # Step 4: Build the Android project
    - name: Run Gradle Build and Assemble
      # We use `./gradlew assembleRelease` to create the final APK/AAB files
      # Replace with `./gradlew assembleDebug` if you only want a debug build
      run: ./gradlew assembleRelease --stacktrace